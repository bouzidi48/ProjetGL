@model ProjetNet.Models.ServiceProjet

@{
    ViewData["Title"] = "Détails du service";
    var projetId = ViewBag.ProjetId;
}

<h1 class="text-info mt-4">Détails du service</h1>

@if (Model != null)
{
    <div class="card mt-4 shadow-sm p-4">
        <h4 class="text-primary">Informations générales</h4>
        <hr />
        <dl class="row">
            <dt class="col-sm-3">Nom du service</dt>
            <dd class="col-sm-9">@(!string.IsNullOrEmpty(Model.Nom) ? Model.Nom : "Non défini")</dd>

            <dt class="col-sm-3">Description</dt>
            <dd class="col-sm-9">@(!string.IsNullOrEmpty(Model.DescriptionService) ? Model.DescriptionService : "Non définie")</dd>

            <dt class="col-sm-3">Durée (jours)</dt>
            <dd class="col-sm-9">@(Model.DureeJours > 0 ? Model.DureeJours.ToString() : "Non définie")</dd>

            <dt class="col-sm-3">Développeur assigné</dt>
            <dd class="col-sm-9">
                @(
                    Model.DeveloppeurAssigne != null
                    ? Model.DeveloppeurAssigne.Nom
                    : "<span class='text-muted fst-italic'>Aucun développeur assigné</span>"
                    )
            </dd>
        </dl>
    </div>
}
else
{
    <p class="mt-4 fst-italic text-muted">Aucun Service n'est affecter associée à ce service.</p>
}
@if (Model.Taches != null && Model.Taches.Any())
{

    <div class="mt-5">
        <h5 class="text-secondary">Liste des tâches</h5>
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>Nom</th>
                    <th>Description</th>
                    <th>Pourcentage d’avancement</th>

                </tr>
            </thead>
            <tbody>
                @foreach (var tache in Model.Taches)
                {
                    <tr>
                        <td>@(tache.Nom ?? "Non défini")</td>
                        <td>@(tache.DescriptionTache ?? "Non définie")</td>
                        <td>@(tache.PourcentageAvancement.ToString("0.##") ?? "0")%</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}
else
{
    <p class="mt-4 fst-italic text-muted">Aucune Taches n'est affecter associée à ce service.</p>
}

<!-- Boutons d’action -->
<div class="mt-5 d-flex justify-content-between">
    <a asp-action="ConsulterProjet" asp-controller="Projet" asp-route-id="@projetId" class="btn btn-secondary ms-2">Retour</a>
</div>
